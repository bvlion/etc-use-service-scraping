name: scraping
on:
  push:
    branches:
      - "main"
  schedule:
    - cron: '11 * * * *'
jobs:
  exec-docker:
    runs-on: ubuntu-latest
      - uses: actions/checkout@v3
      - name: setup env
        run: echo ${{ secrets.ENV_BASE64 }} | base64 -d > .env.local
      - name: run Docker
        run: docker compose up -d
      - name: run Docker running checker
        run: ./docker_check.sh
      - name: git setting
        run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
      - name: commit files
        run: |
          git add -A
          if ! git diff-index --quiet HEAD --; then git commit -am "Update before_hash (By GitHub Actions)"; fi;
          git push